<!DOCTYPE html><html data-dpl-id="dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" lang="en" class="dark fira_mono_f2cab34b-module__lnvfWW__className"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/chunks/d057d761e68243b1.css?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/96876332a93bc4af.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ"/><script src="/_next/static/chunks/f8126a4b38ad180c.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" async=""></script><script src="/_next/static/chunks/03b0938b77fe9494.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" async=""></script><script src="/_next/static/chunks/28fead7bb1bbade8.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" async=""></script><script src="/_next/static/chunks/turbopack-23f9e4e66a5deae0.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" async=""></script><script src="/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" async=""></script><script src="/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" async=""></script><script src="/_next/static/chunks/894fc741f88e4ecd.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" async=""></script><meta name="next-size-adjust" content=""/><title>python-type-safety by wshobson/agents</title><meta name="description" content="Discover and install skills for AI agents."/><link rel="canonical" href="https://skills.sh/wshobson/agents/python-type-safety"/><meta property="og:title" content="python-type-safety by wshobson/agents"/><meta property="og:description" content="Discover and install skills for AI agents."/><meta property="og:url" content="https://skills.sh/wshobson/agents/python-type-safety"/><meta property="og:image:alt" content="Skill"/><meta property="og:image:type" content="image/png"/><meta property="og:image" content="https://skills.sh/wshobson/agents/python-type-safety/opengraph-image?af71664f4dc3e62d"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="python-type-safety by wshobson/agents"/><meta name="twitter:description" content="Install the python-type-safety skill for wshobson/agents"/><meta name="twitter:image:alt" content="Skill"/><meta name="twitter:image:type" content="image/png"/><meta name="twitter:image" content="https://skills.sh/wshobson/agents/python-type-safety/opengraph-image?af71664f4dc3e62d"/><meta name="twitter:image:width" content="1200"/><meta name="twitter:image:height" content="630"/><link rel="icon" href="/favicon.ico?favicon.0b3bf435.ico?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" sizes="256x256" type="image/x-icon"/><script src="/_next/static/chunks/a6dad97d9634a72d.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" noModule=""></script></head><body class="geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable fira_mono_f2cab34b-module__lnvfWW__variable antialiased"><div hidden=""><!--$--><!--/$--></div><!--$--><!--/$--><!--$?--><template id="B:0"></template><!--/$--><header class="sticky top-0 z-50 bg-background"><div class="flex h-14 items-center justify-between px-4 gap-6"><div class="flex items-center gap-2"><a title="Made with love by Vercel" href="https://vercel.com"><svg data-testid="geist-icon" height="18" stroke-linejoin="round" viewBox="0 0 16 16" width="18" style="color:currentcolor"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 1L16 15H0L8 1Z" fill="currentColor"></path></svg></a><span class="text-(--ds-gray-500)"><svg data-testid="geist-icon" height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16" style="color:currentcolor"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.01526 15.3939L4.3107 14.7046L10.3107 0.704556L10.6061 0.0151978L11.9849 0.606077L11.6894 1.29544L5.68942 15.2954L5.39398 15.9848L4.01526 15.3939Z" fill="currentColor"></path></svg></span><a href="/"><span class="font-medium tracking-tight text-lg">Skills</span></a></div><a target="_blank" rel="noopener noreferrer" class="inline-flex items-center font-mono text-[10px] sm:text-xs tracking-wide text-(--ds-gray-1000) hover:text-foreground transition-colors" href="https://luma.com/8d50mt8d"><span class="inline-flex items-center justify-center w-3 mr-2 -translate-y-[1px] translate-x-[2px]">▥</span><span class="hidden sm:inline"><span>AGENT LAB: SKILLS — FEB 26 NYC</span></span><span class="sm:hidden"><span>AGENT LAB: SKILLS</span></span><span class="ml-[2px] inline-block w-[6px] h-[10px] sm:h-[12px] bg-current transition-opacity opacity-0"></span></a><nav class="flex items-baseline gap-6"><a class="text-sm text-muted-foreground hover:text-foreground transition-colors inline-flex items-center gap-1.5" href="/audits">Audits<span class="text-xs font-mono uppercase px-2 py-1 rounded bg-(--ds-gray-100) text-(--ds-gray-700)">New</span></a><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs">Docs</a></nav></div></header><!--&--><!--&--><!--&--><!--&--><div class="min-h-screen max-w-6xl mx-auto px-4 py-2 sm:py-12 sm:px-6 lg:px-8"><main><div class="flex items-center gap-2 text-sm text-(--ds-gray-600) mb-6 min-w-0"><a class="hover:text-foreground shrink-0" href="/">skills</a><span class="shrink-0">/</span><a class="hover:text-foreground truncate min-w-0" href="/wshobson">wshobson</a><span class="shrink-0">/</span><a class="hover:text-foreground truncate min-w-0" href="/wshobson/agents">agents</a><span class="shrink-0">/</span><span class="text-(--ds-gray-600) truncate">python-type-safety</span></div><h1 class="text-4xl font-semibold text-foreground mb-2 tracking-tight">python-type-safety</h1><div class="mb-10"><button class="bg-muted/50 rounded-md px-3 py-2 font-mono text-sm text-muted-foreground hover:text-foreground transition-colors cursor-pointer flex items-center gap-2 max-w-full min-w-0" title="Copy to clipboard"><code class="truncate"><span class="opacity-50">$</span> <!-- -->npx skills add https://github.com/wshobson/agents --skill python-type-safety</code><svg viewBox="0 0 16 16" height="16" width="16" data-slot="geist-icon" style="color:currentColor" class="h-3.5 w-3.5 shrink-0"><path fill="currentColor" fill-rule="evenodd" d="M2.75.5C1.78.5 1 1.28 1 2.25v7.5c0 .97.78 1.75 1.75 1.75H4.5V10H2.75a.25.25 0 0 1-.25-.25v-7.5c0-.14.11-.25.25-.25h5.5c.14 0 .25.11.25.25V3H10v-.75C10 1.28 9.22.5 8.25.5zm5 4C6.78 4.5 6 5.28 6 6.25v7.5c0 .97.78 1.75 1.75 1.75h5.5c.97 0 1.75-.78 1.75-1.75v-7.5c0-.97-.78-1.75-1.75-1.75zM7.5 6.25c0-.14.11-.25.25-.25h5.5c.14 0 .25.11.25.25v7.5q-.02.23-.25.25h-5.5a.25.25 0 0 1-.25-.25z" clip-rule="evenodd"/></svg></button></div><div class="grid grid-cols-1 lg:grid-cols-12 gap-16"><div class="lg:col-span-9 min-w-0 overflow-hidden"><div class="bg-background"><div class="flex items-center gap-2 text-sm font-mono text-white mb-4 pb-4 border-b border-border"><svg viewBox="0 0 16 16" height="16" width="16" data-slot="geist-icon" style="color:currentColor" class="h-4 w-4"><path fill="currentColor" d="M9.18 0a1 1 0 0 1 .61.3l4.42 4.4a1 1 0 0 1 .29.71v8.09A2.5 2.5 0 0 1 12 16H4a2.5 2.5 0 0 1-2.5-2.5V0h7.69M3 13.5a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V5.62L8.88 1.5H3zm8.63-1.25H4.5V11h7.13zm0-3H4.5V8h7.13zm-5-3H4.5V5h2.13z"/></svg><span>SKILL.md</span></div><div class="prose prose-invert max-w-none prose-headings:font-semibold prose-headings:tracking-tight prose-h1:text-4xl prose-h1:mb-2 prose-h2:text-2xl prose-h2:mb-2 prose-h3:text-lg prose-h3:mb-2 prose-p:text-muted-foreground prose-li:text-muted-foreground prose-code:bg-muted prose-code:text-foreground prose-code:px-1 prose-code:py-0.5 prose-code:rounded-sm prose-code:text-sm prose-code:before:content-none prose-code:after:content-none prose-pre:bg-muted prose-pre:text-foreground prose-pre:border prose-pre:border-border prose-pre:rounded-md [&amp;_table]:!border-[color:var(--border)] [&amp;_th]:!border-[color:var(--border)] [&amp;_td]:!border-[color:var(--border)]"><h1>Python Type Safety</h1>
<p>Leverage Python's type system to catch errors at static analysis time. Type annotations serve as enforced documentation that tooling validates automatically.</p>
<h2>When to Use This Skill</h2>
<ul>
<li>Adding type hints to existing code</li>
<li>Creating generic, reusable classes</li>
<li>Defining structural interfaces with protocols</li>
<li>Configuring mypy or pyright for strict checking</li>
<li>Understanding type narrowing and guards</li>
<li>Building type-safe APIs and libraries</li>
</ul>
<h2>Core Concepts</h2>
<h3>1. Type Annotations</h3>
<p>Declare expected types for function parameters, return values, and variables.</p>
<h3>2. Generics</h3>
<p>Write reusable code that preserves type information across different types.</p>
<h3>3. Protocols</h3>
<p>Define structural interfaces without inheritance (duck typing with type safety).</p>
<h3>4. Type Narrowing</h3>
<p>Use guards and conditionals to narrow types within code blocks.</p>
<h2>Quick Start</h2>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">def</span> <span class="token function">get_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User <span class="token operator">|</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Return type makes 'might not exist' explicit."""</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Type checker enforces handling None case</span>
</span><span class="code-line">user <span class="token operator">=</span> get_user<span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">if</span> user <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token keyword">raise</span> UserNotFoundError<span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">print</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment"># Type checker knows user is User here</span>
</span></code></pre>
<h2>Fundamental Patterns</h2>
<h3>Pattern 1: Annotate All Public Signatures</h3>
<p>Every public function, method, and class should have type annotations.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">def</span> <span class="token function">get_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User<span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Retrieve user by ID."""</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">process_batch</span><span class="token punctuation">(</span>
</span><span class="code-line">    items<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Item<span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    max_workers<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> BatchResult<span class="token punctuation">[</span>ProcessedItem<span class="token punctuation">]</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Process items concurrently."""</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">UserRepository</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> db<span class="token punctuation">:</span> Database<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        self<span class="token punctuation">.</span>_db <span class="token operator">=</span> db
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">find_by_id</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user_id<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User <span class="token operator">|</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token triple-quoted-string string">"""Return User if found, None otherwise."""</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">find_by_email</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User <span class="token operator">|</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> user<span class="token punctuation">:</span> User<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User<span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token triple-quoted-string string">"""Save and return user with generated ID."""</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></code></pre>
<p>Use <code>mypy --strict</code> or <code>pyright</code> in CI to catch type errors early. For existing projects, enable strict mode incrementally using per-module overrides.</p>
<h3>Pattern 2: Use Modern Union Syntax</h3>
<p>Python 3.10+ provides cleaner union syntax.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token comment"># Preferred (3.10+)</span>
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">find_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User <span class="token operator">|</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">parse_value</span><span class="token punctuation">(</span>v<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span> <span class="token operator">|</span> <span class="token builtin">float</span> <span class="token operator">|</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Older style (still valid, needed for 3.9)</span>
</span><span class="code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Optional<span class="token punctuation">,</span> Union
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">find_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span>User<span class="token punctuation">]</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></code></pre>
<h3>Pattern 3: Type Narrowing with Guards</h3>
<p>Use conditionals to narrow types for the type checker.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">def</span> <span class="token function">process_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> UserData<span class="token punctuation">:</span>
</span><span class="code-line">    user <span class="token operator">=</span> find_user<span class="token punctuation">(</span>user_id<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> user <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">raise</span> UserNotFoundError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"User </span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string"> not found"</span></span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment"># Type checker knows user is User here, not User | None</span>
</span><span class="code-line">    <span class="token keyword">return</span> UserData<span class="token punctuation">(</span>
</span><span class="code-line">        name<span class="token operator">=</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
</span><span class="code-line">        email<span class="token operator">=</span>user<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">process_items</span><span class="token punctuation">(</span>items<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Item <span class="token operator">|</span> <span class="token boolean">None</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">list</span><span class="token punctuation">[</span>ProcessedItem<span class="token punctuation">]</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token comment"># Filter and narrow types</span>
</span><span class="code-line">    valid_items <span class="token operator">=</span> <span class="token punctuation">[</span>item <span class="token keyword">for</span> item <span class="token keyword">in</span> items <span class="token keyword">if</span> item <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token comment"># valid_items is now list[Item]</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">[</span>process<span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> valid_items<span class="token punctuation">]</span>
</span></code></pre>
<h3>Pattern 4: Generic Classes</h3>
<p>Create type-safe reusable containers.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> TypeVar<span class="token punctuation">,</span> Generic
</span><span class="code-line">
</span><span class="code-line">T <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">"T"</span><span class="token punctuation">)</span>
</span><span class="code-line">E <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">"E"</span><span class="token punctuation">,</span> bound<span class="token operator">=</span>Exception<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Result</span><span class="token punctuation">(</span>Generic<span class="token punctuation">[</span>T<span class="token punctuation">,</span> E<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Represents either a success value or an error."""</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>
</span><span class="code-line">        self<span class="token punctuation">,</span>
</span><span class="code-line">        value<span class="token punctuation">:</span> T <span class="token operator">|</span> <span class="token boolean">None</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
</span><span class="code-line">        error<span class="token punctuation">:</span> E <span class="token operator">|</span> <span class="token boolean">None</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span>error <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"Exactly one of value or error must be set"</span><span class="token punctuation">)</span>
</span><span class="code-line">        self<span class="token punctuation">.</span>_value <span class="token operator">=</span> value
</span><span class="code-line">        self<span class="token punctuation">.</span>_error <span class="token operator">=</span> error
</span><span class="code-line">
</span><span class="code-line">    <span class="token decorator annotation punctuation">@property</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">is_success</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_error <span class="token keyword">is</span> <span class="token boolean">None</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token decorator annotation punctuation">@property</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">is_failure</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_error <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">unwrap</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> T<span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token triple-quoted-string string">"""Get value or raise the error."""</span>
</span><span class="code-line">        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_error <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token keyword">raise</span> self<span class="token punctuation">.</span>_error
</span><span class="code-line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_value  <span class="token comment"># type: ignore[return-value]</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">unwrap_or</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> default<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> T<span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token triple-quoted-string string">"""Get value or return default."""</span>
</span><span class="code-line">        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_error <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token keyword">return</span> default
</span><span class="code-line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_value  <span class="token comment"># type: ignore[return-value]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Usage preserves types</span>
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">parse_config</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Result<span class="token punctuation">[</span>Config<span class="token punctuation">,</span> ConfigError<span class="token punctuation">]</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token keyword">try</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">return</span> Result<span class="token punctuation">(</span>value<span class="token operator">=</span>Config<span class="token punctuation">.</span>from_file<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">except</span> ConfigError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">return</span> Result<span class="token punctuation">(</span>error<span class="token operator">=</span>e<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">result <span class="token operator">=</span> parse_config<span class="token punctuation">(</span><span class="token string">"config.yaml"</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">if</span> result<span class="token punctuation">.</span>is_success<span class="token punctuation">:</span>
</span><span class="code-line">    config <span class="token operator">=</span> result<span class="token punctuation">.</span>unwrap<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># Type: Config</span>
</span></code></pre>
<h2>Advanced Patterns</h2>
<h3>Pattern 5: Generic Repository</h3>
<p>Create type-safe data access patterns.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> TypeVar<span class="token punctuation">,</span> Generic
</span><span class="code-line"><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABC<span class="token punctuation">,</span> abstractmethod
</span><span class="code-line">
</span><span class="code-line">T <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">"T"</span><span class="token punctuation">)</span>
</span><span class="code-line">ID <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">"ID"</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Repository</span><span class="token punctuation">(</span>ABC<span class="token punctuation">,</span> Generic<span class="token punctuation">[</span>T<span class="token punctuation">,</span> ID<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Generic repository interface."""</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token decorator annotation punctuation">@abstractmethod</span>
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">:</span> ID<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> T <span class="token operator">|</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token triple-quoted-string string">"""Get entity by ID."""</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token decorator annotation punctuation">@abstractmethod</span>
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> entity<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> T<span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token triple-quoted-string string">"""Save and return entity."""</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token decorator annotation punctuation">@abstractmethod</span>
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">:</span> ID<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token triple-quoted-string string">"""Delete entity, return True if existed."""</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">UserRepository</span><span class="token punctuation">(</span>Repository<span class="token punctuation">[</span>User<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Concrete repository for Users with string IDs."""</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User <span class="token operator">|</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        row <span class="token operator">=</span> <span class="token keyword">await</span> self<span class="token punctuation">.</span>_db<span class="token punctuation">.</span>fetchrow<span class="token punctuation">(</span>
</span><span class="code-line">            <span class="token string">"SELECT * FROM users WHERE id = $1"</span><span class="token punctuation">,</span> <span class="token builtin">id</span>
</span><span class="code-line">        <span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword">return</span> User<span class="token punctuation">(</span><span class="token operator">**</span>row<span class="token punctuation">)</span> <span class="token keyword">if</span> row <span class="token keyword">else</span> <span class="token boolean">None</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> entity<span class="token punctuation">:</span> User<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User<span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></code></pre>
<h3>Pattern 6: TypeVar with Bounds</h3>
<p>Restrict generic parameters to specific types.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> TypeVar
</span><span class="code-line"><span class="token keyword">from</span> pydantic <span class="token keyword">import</span> BaseModel
</span><span class="code-line">
</span><span class="code-line">ModelT <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">"ModelT"</span><span class="token punctuation">,</span> bound<span class="token operator">=</span>BaseModel<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">validate_and_create</span><span class="token punctuation">(</span>model_cls<span class="token punctuation">:</span> <span class="token builtin">type</span><span class="token punctuation">[</span>ModelT<span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token builtin">dict</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> ModelT<span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Create a validated Pydantic model from dict."""</span>
</span><span class="code-line">    <span class="token keyword">return</span> model_cls<span class="token punctuation">.</span>model_validate<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Works with any BaseModel subclass</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    name<span class="token punctuation">:</span> <span class="token builtin">str</span>
</span><span class="code-line">    email<span class="token punctuation">:</span> <span class="token builtin">str</span>
</span><span class="code-line">
</span><span class="code-line">user <span class="token operator">=</span> validate_and_create<span class="token punctuation">(</span>User<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span> <span class="token string">"email"</span><span class="token punctuation">:</span> <span class="token string">"a@b.com"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment"># user is typed as User</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Type error: str is not a BaseModel subclass</span>
</span><span class="code-line">result <span class="token operator">=</span> validate_and_create<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Alice"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment"># Error!</span>
</span></code></pre>
<h3>Pattern 7: Protocols for Structural Typing</h3>
<p>Define interfaces without requiring inheritance.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Protocol<span class="token punctuation">,</span> runtime_checkable
</span><span class="code-line">
</span><span class="code-line"><span class="token decorator annotation punctuation">@runtime_checkable</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Serializable</span><span class="token punctuation">(</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Any class that can be serialized to/from dict."""</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">to_dict</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">dict</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token decorator annotation punctuation">@classmethod</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">from_dict</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token builtin">dict</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"Serializable"</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># User satisfies Serializable without inheriting from it</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">        self<span class="token punctuation">.</span><span class="token builtin">id</span> <span class="token operator">=</span> <span class="token builtin">id</span>
</span><span class="code-line">        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">to_dict</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">dict</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token decorator annotation punctuation">@classmethod</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">from_dict</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token builtin">dict</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">"User"</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">return</span> cls<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">serialize</span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> Serializable<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Works with any Serializable object."""</span>
</span><span class="code-line">    <span class="token keyword">return</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>obj<span class="token punctuation">.</span>to_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Works - User matches the protocol</span>
</span><span class="code-line">serialize<span class="token punctuation">(</span>User<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Runtime checking with @runtime_checkable</span>
</span><span class="code-line"><span class="token builtin">isinstance</span><span class="token punctuation">(</span>User<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"Alice"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Serializable<span class="token punctuation">)</span>  <span class="token comment"># True</span>
</span></code></pre>
<h3>Pattern 8: Common Protocol Patterns</h3>
<p>Define reusable structural interfaces.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Protocol
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Closeable</span><span class="token punctuation">(</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Resource that can be closed."""</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">close</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">AsyncCloseable</span><span class="token punctuation">(</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Async resource that can be closed."""</span>
</span><span class="code-line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">close</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Readable</span><span class="token punctuation">(</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Object that can be read from."""</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">read</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bytes</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">HasId</span><span class="token punctuation">(</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Object with an ID property."""</span>
</span><span class="code-line">    <span class="token decorator annotation punctuation">@property</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">id</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Comparable</span><span class="token punctuation">(</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token triple-quoted-string string">"""Object that supports comparison."""</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">__lt__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token string">"Comparable"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">__le__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token string">"Comparable"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></code></pre>
<h3>Pattern 9: Type Aliases</h3>
<p>Create meaningful type names.</p>
<p><strong>Note:</strong> The <code>type</code> statement was introduced in Python 3.10 for simple aliases. Generic type statements require Python 3.12+.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token comment"># Python 3.10+ type statement for simple aliases</span>
</span><span class="code-line"><span class="token builtin">type</span> UserId <span class="token operator">=</span> <span class="token builtin">str</span>
</span><span class="code-line"><span class="token builtin">type</span> UserDict <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">,</span> Any<span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Python 3.12+ type statement with generics</span>
</span><span class="code-line"><span class="token builtin">type</span> Handler<span class="token punctuation">[</span>T<span class="token punctuation">]</span> <span class="token operator">=</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>Request<span class="token punctuation">]</span><span class="token punctuation">,</span> T<span class="token punctuation">]</span>
</span><span class="code-line"><span class="token builtin">type</span> AsyncHandler<span class="token punctuation">[</span>T<span class="token punctuation">]</span> <span class="token operator">=</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>Request<span class="token punctuation">]</span><span class="token punctuation">,</span> Awaitable<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Python 3.9-3.11 style (needed for broader compatibility)</span>
</span><span class="code-line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> TypeAlias
</span><span class="code-line"><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> Callable<span class="token punctuation">,</span> Awaitable
</span><span class="code-line">
</span><span class="code-line">UserId<span class="token punctuation">:</span> TypeAlias <span class="token operator">=</span> <span class="token builtin">str</span>
</span><span class="code-line">Handler<span class="token punctuation">:</span> TypeAlias <span class="token operator">=</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>Request<span class="token punctuation">]</span><span class="token punctuation">,</span> Response<span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Usage</span>
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">register_handler</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> Handler<span class="token punctuation">[</span>Response<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></code></pre>
<h3>Pattern 10: Callable Types</h3>
<p>Type function parameters and callbacks.</p>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> collections<span class="token punctuation">.</span>abc <span class="token keyword">import</span> Callable<span class="token punctuation">,</span> Awaitable
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Sync callback</span>
</span><span class="code-line">ProgressCallback <span class="token operator">=</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>  <span class="token comment"># (current, total)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Async callback</span>
</span><span class="code-line">AsyncHandler <span class="token operator">=</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>Request<span class="token punctuation">]</span><span class="token punctuation">,</span> Awaitable<span class="token punctuation">[</span>Response<span class="token punctuation">]</span><span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># With named parameters (using Protocol)</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">OnProgress</span><span class="token punctuation">(</span>Protocol<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>
</span><span class="code-line">        self<span class="token punctuation">,</span>
</span><span class="code-line">        current<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span>
</span><span class="code-line">        total<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token operator">*</span><span class="token punctuation">,</span>
</span><span class="code-line">        message<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">process_items</span><span class="token punctuation">(</span>
</span><span class="code-line">    items<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span>Item<span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    on_progress<span class="token punctuation">:</span> ProgressCallback <span class="token operator">|</span> <span class="token boolean">None</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">list</span><span class="token punctuation">[</span>Result<span class="token punctuation">]</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token keyword">for</span> i<span class="token punctuation">,</span> item <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">if</span> on_progress<span class="token punctuation">:</span>
</span><span class="code-line">            on_progress<span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></code></pre>
<h2>Configuration</h2>
<h3>Strict Mode Checklist</h3>
<p>For <code>mypy --strict</code> compliance:</p>
<pre class="language-toml"><code class="language-toml code-highlight"><span class="code-line"><span class="token comment"># pyproject.toml</span>
</span><span class="code-line"><span class="token punctuation">[</span><span class="token table class-name">tool.mypy</span><span class="token punctuation">]</span>
</span><span class="code-line"><span class="token key property">python_version</span> <span class="token punctuation">=</span> <span class="token string">"3.12"</span>
</span><span class="code-line"><span class="token key property">strict</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-line"><span class="token key property">warn_return_any</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-line"><span class="token key property">warn_unused_ignores</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-line"><span class="token key property">disallow_untyped_defs</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-line"><span class="token key property">disallow_incomplete_defs</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span><span class="code-line"><span class="token key property">no_implicit_optional</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</span></code></pre>
<p>Incremental adoption goals:</p>
<ul>
<li>All function parameters annotated</li>
<li>All return types annotated</li>
<li>Class attributes annotated</li>
<li>Minimize <code>Any</code> usage (acceptable for truly dynamic data)</li>
<li>Generic collections use type parameters (<code>list[str]</code> not <code>list</code>)</li>
</ul>
<p>For existing codebases, enable strict mode per-module using <code># mypy: strict</code> or configure per-module overrides in <code>pyproject.toml</code>.</p>
<h2>Best Practices Summary</h2>
<ol>
<li><strong>Annotate all public APIs</strong> - Functions, methods, class attributes</li>
<li><strong>Use <code>T | None</code></strong> - Modern union syntax over <code>Optional[T]</code></li>
<li><strong>Run strict type checking</strong> - <code>mypy --strict</code> in CI</li>
<li><strong>Use generics</strong> - Preserve type info in reusable code</li>
<li><strong>Define protocols</strong> - Structural typing for interfaces</li>
<li><strong>Narrow types</strong> - Use guards to help the type checker</li>
<li><strong>Bound type vars</strong> - Restrict generics to meaningful types</li>
<li><strong>Create type aliases</strong> - Meaningful names for complex types</li>
<li><strong>Minimize <code>Any</code></strong> - Use specific types or generics. <code>Any</code> is acceptable for truly dynamic data or when interfacing with untyped third-party code</li>
<li><strong>Document with types</strong> - Types are enforceable documentation</li>
</ol></div></div></div><div class=" lg:col-span-3"><div class="bg-background pb-8"><div class="text-sm font-mono uppercase text-white mb-2"><span>Weekly Installs</span></div><div class="text-3xl font-semibold font-mono tracking-tight text-foreground">1.2K</div></div><div class="bg-background py-8"><div class="text-sm font-mono uppercase text-white mb-2"><span>Repository</span></div><a href="https://github.com/wshobson/agents" target="_blank" rel="ugc nofollow noopener noreferrer" class="text-sm font-mono text-foreground hover:underline break-all">wshobson/agents</a></div><div class="bg-background py-8"><div class="text-sm font-mono uppercase text-white mb-2"><span>First Seen</span></div><div class="text-sm font-mono text-foreground">Jan 30, 2026</div></div><div class="bg-background py-8"><div class="text-sm font-mono uppercase text-white mb-3">Security Audits</div><div class="divide-y divide-border"><a class="block py-2 hover:bg-muted/40 -mx-3 px-3 rounded transition-colors border-0" href="/wshobson/agents/python-type-safety/security/agent-trust-hub"><div class="flex items-center justify-between mb-1"><span class="text-sm font-medium text-foreground truncate">Gen Agent Trust Hub</span><span class="text-xs font-mono uppercase px-2 py-1 rounded bg-green-500/10 text-green-500">Pass</span></div></a><a class="block py-2 hover:bg-muted/40 -mx-3 px-3 rounded transition-colors border-0" href="/wshobson/agents/python-type-safety/security/socket"><div class="flex items-center justify-between mb-1"><span class="text-sm font-medium text-foreground truncate">Socket</span><span class="text-xs font-mono uppercase px-2 py-1 rounded bg-green-500/10 text-green-500">Pass</span></div></a><a class="block py-2 hover:bg-muted/40 -mx-3 px-3 rounded transition-colors border-0" href="/wshobson/agents/python-type-safety/security/snyk"><div class="flex items-center justify-between mb-1"><span class="text-sm font-medium text-foreground truncate">Snyk</span><span class="text-xs font-mono uppercase px-2 py-1 rounded bg-green-500/10 text-green-500">Pass</span></div></a></div></div><div class="bg-background py-8"><div class="text-sm font-mono uppercase text-white mb-1">Installed on</div><div class="divide-y divide-border"><div class="flex items-center justify-between text-sm py-2"><span class="text-foreground">claude-code</span><span class="text-muted-foreground font-mono">868</span></div><div class="flex items-center justify-between text-sm py-2"><span class="text-foreground">opencode</span><span class="text-muted-foreground font-mono">803</span></div><div class="flex items-center justify-between text-sm py-2"><span class="text-foreground">gemini-cli</span><span class="text-muted-foreground font-mono">765</span></div><div class="flex items-center justify-between text-sm py-2"><span class="text-foreground">codex</span><span class="text-muted-foreground font-mono">724</span></div><div class="flex items-center justify-between text-sm py-2"><span class="text-foreground">cursor</span><span class="text-muted-foreground font-mono">585</span></div><div class="flex items-center justify-between text-sm py-2"><span class="text-foreground">github-copilot</span><span class="text-muted-foreground font-mono">575</span></div></div></div></div></div></main></div><!--$--><!--/$--><!--/&--><!--/&--><!--/&--><!--/&--><!--$?--><template id="B:1"></template><!--/$--><!--$?--><template id="B:2"></template><!--/$--><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/_next/static/chunks/96876332a93bc4af.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ" id="_R_" async=""></script><script>$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("B:0","BAILOUT_TO_CLIENT_SIDE_RENDERING")</script><script>$RX("B:1","BAILOUT_TO_CLIENT_SIDE_RENDERING")</script><script>$RX("B:2","BAILOUT_TO_CLIENT_SIDE_RENDERING")</script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[4903,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"NuqsAdapter\"]\n3:I[83020,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"SearchInputStateProvider\"]\n4:I[81910,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/894fc741f88e4ecd.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"\"]\n5:I[59720,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"HeaderAnnouncement\"]\n6:I[23524,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"default\"]\n7:I[64801,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"default\"]\n8:I[6987,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"Analytics\"]\n9:I[56202,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"SpeedInsights\"]\n11:I[60021,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"default\",1]\n13:I[45838,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"OutletBoundary\"]\n14:\"$Sreact.suspense\"\n16:I[45838,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"ViewportBoundary\"]\n18:I[45838,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"MetadataBoundary\"]\n1a:I[2115,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/894fc741f88e4ecd.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"InstallCommand\"]\n1f:I[36861,[\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\"],\"IconMark\"]\n:HL[\"/_next/static/chunks/d057d761e68243b1.css?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"style\"]\n:HL[\"/_next/static/media/797e433ab948586e-s.p.dbea232f.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/9ce9a4a38ba25966-s.p.27ba0bad.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/caa3a2e1cccd8315-s.p.853070df.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\nd:[]\ne:[]\nf:[]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"K9OTQ6oc6YnVA0Vi6K3y-\",\"c\":[\"\",\"wshobson\",\"agents\",\"python-type-safety\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[[\"owner\",\"wshobson\",\"d\",[\"api\",\"audits\",\"debug-security\",\"docs\",\"hot\",\"mintlify\",\"s\",\"search\",\"trending\"]],{\"children\":[[\"repo\",\"agents\",\"d\",[]],{\"children\":[[\"skill\",\"python-type-safety\",\"d\",[]],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/d057d761e68243b1.css?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/2cb932bae861a827.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/591267a1e308b6ac.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"dark fira_mono_f2cab34b-module__lnvfWW__className\",\"children\":[\"$\",\"body\",null,{\"className\":\"geist_a71539c9-module__T19VSG__variable geist_mono_8d43a2aa-module__8Li5zG__variable fira_mono_f2cab34b-module__lnvfWW__variable antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"children\":[[\"$\",\"header\",null,{\"className\":\"sticky top-0 z-50 bg-background\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex h-14 items-center justify-between px-4 gap-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"$L4\",null,{\"href\":\"https://vercel.com\",\"title\":\"Made with love by Vercel\",\"children\":[\"$\",\"svg\",null,{\"data-testid\":\"geist-icon\",\"height\":\"18\",\"strokeLinejoin\":\"round\",\"viewBox\":\"0 0 16 16\",\"width\":\"18\",\"style\":{\"color\":\"currentcolor\"},\"children\":[\"$\",\"path\",null,{\"fillRule\":\"evenodd\",\"clipRule\":\"evenodd\",\"d\":\"M8 1L16 15H0L8 1Z\",\"fill\":\"currentColor\"}]}]}],[\"$\",\"span\",null,{\"className\":\"text-(--ds-gray-500)\",\"children\":[\"$\",\"svg\",null,{\"data-testid\":\"geist-icon\",\"height\":\"16\",\"strokeLinejoin\":\"round\",\"viewBox\":\"0 0 16 16\",\"width\":\"16\",\"style\":{\"color\":\"currentcolor\"},\"children\":[\"$\",\"path\",null,{\"fillRule\":\"evenodd\",\"clipRule\":\"evenodd\",\"d\":\"M4.01526 15.3939L4.3107 14.7046L10.3107 0.704556L10.6061 0.0151978L11.9849 0.606077L11.6894 1.29544L5.68942 15.2954L5.39398 15.9848L4.01526 15.3939Z\",\"fill\":\"currentColor\"}]}]}],[\"$\",\"$L4\",null,{\"href\":\"/\",\"children\":[\"$\",\"span\",null,{\"className\":\"font-medium tracking-tight text-lg\",\"children\":\"Skills\"}]}]]}],[\"$\",\"$L5\",null,{}],[\"$\",\"nav\",null,{\"className\":\"flex items-baseline gap-6\",\"children\":[[\"$\",\"$L4\",null,{\"href\":\"/audits\",\"className\":\"text-sm text-muted-foreground hover:text-foreground transition-colors inline-flex items-center gap-1.5\",\"children\":[\"Audits\",[\"$\",\"span\",null,{\"className\":\"text-xs font-mono uppercase px-2 py-1 rounded bg-(--ds-gray-100) text-(--ds-gray-700)\",\"children\":\"New\"}]]}],[\"$\",\"$L4\",null,{\"href\":\"/docs\",\"className\":\"text-sm text-muted-foreground hover:text-foreground transition-colors\",\"children\":\"Docs\"}]]}]]}]}],[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-2xl font-medium\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"className\":\"h-12 w-px bg-border\"}],[\"$\",\"p\",null,{\"className\":\"text-sm text-muted-foreground\",\"children\":\"This page could not be found.\"}]]}],[\"$\",\"$L4\",null,{\"href\":\"/\",\"className\":\"mt-8 text-sm text-muted-foreground hover:text-foreground transition-colors\",\"children\":\"Go back home\"}]]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"$L8\",null,{}],[\"$\",\"$L9\",null,{}]]}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$La\",[\"$Lb\"],\"$Lc\"]}],{},null,true,false,null]},null,true,false,\"$Wd\"]},null,true,false,\"$We\"]},null,true,false,\"$Wf\"]},null,true,false,null],\"$L10\",true]],\"m\":\"$undefined\",\"G\":[\"$11\",[\"$L12\"]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/894fc741f88e4ecd.js?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"async\":true,\"nonce\":\"$undefined\"}]\nc:[\"$\",\"$L13\",null,{\"children\":[\"$\",\"$14\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@15\"}]}]\n10:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L16\",null,{\"children\":\"$L17\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L18\",null,{\"children\":[\"$\",\"$14\",null,{\"name\":\"Next.Metadata\",\"children\":\"$L19\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]\n12:[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/d057d761e68243b1.css?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"div\",null,{\"className\":\"min-h-screen max-w-6xl mx-auto px-4 py-2 sm:py-12 sm:px-6 lg:px-8\",\"children\":[\"$\",\"main\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2 text-sm text-(--ds-gray-600) mb-6 min-w-0\",\"children\":[[\"$\",\"$L4\",null,{\"href\":\"/\",\"className\":\"hover:text-foreground shrink-0\",\"children\":\"skills\"}],[\"$\",\"span\",null,{\"className\":\"shrink-0\",\"children\":\"/\"}],[\"$\",\"$L4\",null,{\"href\":\"/wshobson\",\"className\":\"hover:text-foreground truncate min-w-0\",\"children\":\"wshobson\"}],[\"$\",\"span\",null,{\"className\":\"shrink-0\",\"children\":\"/\"}],[\"$\",\"$L4\",null,{\"href\":\"/wshobson/agents\",\"className\":\"hover:text-foreground truncate min-w-0\",\"children\":\"agents\"}],[\"$\",\"span\",null,{\"className\":\"shrink-0\",\"children\":\"/\"}],[\"$\",\"span\",null,{\"className\":\"text-(--ds-gray-600) truncate\",\"children\":\"python-type-safety\"}]]}],[\"$\",\"h1\",null,{\"className\":\"text-4xl font-semibold text-foreground mb-2 tracking-tight\",\"children\":\"python-type-safety\"}],[\"$\",\"div\",null,{\"className\":\"mb-10\",\"children\":[\"$\",\"$L1a\",null,{\"command\":\"npx skills add https://github.com/wshobson/agents --skill python-type-safety\"}]}],[\"$\",\"div\",null,{\"className\":\"grid grid-cols-1 lg:grid-cols-12 gap-16\",\"children\":[[\"$\",\"div\",null,{\"className\":\"lg:col-span-9 min-w-0 overflow-hidden\",\"children\":[\"$\",\"div\",null,{\"className\":\"bg-background\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2 text-sm font-mono text-white mb-4 pb-4 border-b border-border\",\"children\":[[\"$\",\"svg\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cpath fill=\\\"currentColor\\\" d=\\\"M9.18 0a1 1 0 0 1 .61.3l4.42 4.4a1 1 0 0 1 .29.71v8.09A2.5 2.5 0 0 1 12 16H4a2.5 2.5 0 0 1-2.5-2.5V0h7.69M3 13.5a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V5.62L8.88 1.5H3zm8.63-1.25H4.5V11h7.13zm0-3H4.5V8h7.13zm-5-3H4.5V5h2.13z\\\"/\u003e\"},\"viewBox\":\"0 0 16 16\",\"height\":16,\"width\":16,\"data-slot\":\"geist-icon\",\"style\":{\"color\":\"currentColor\"},\"className\":\"h-4 w-4\"}],[\"$\",\"span\",null,{\"children\":\"SKILL.md\"}]]}],\"$L1b\"]}]}],[\"$\",\"div\",null,{\"className\":\" lg:col-span-3\",\"children\":[[\"$\",\"div\",null,{\"className\":\"bg-background pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-sm font-mono uppercase text-white mb-2\",\"children\":[\"$\",\"span\",null,{\"children\":\"Weekly Installs\"}]}],[\"$\",\"div\",null,{\"className\":\"text-3xl font-semibold font-mono tracking-tight text-foreground\",\"children\":\"1.2K\"}]]}],[\"$\",\"div\",null,{\"className\":\"bg-background py-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-sm font-mono uppercase text-white mb-2\",\"children\":[\"$\",\"span\",null,{\"children\":\"Repository\"}]}],[\"$\",\"a\",null,{\"href\":\"https://github.com/wshobson/agents\",\"target\":\"_blank\",\"rel\":\"ugc nofollow noopener noreferrer\",\"className\":\"text-sm font-mono text-foreground hover:underline break-all\",\"children\":\"wshobson/agents\"}]]}],[\"$\",\"div\",null,{\"className\":\"bg-background py-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-sm font-mono uppercase text-white mb-2\",\"children\":[\"$\",\"span\",null,{\"children\":\"First Seen\"}]}],[\"$\",\"div\",null,{\"className\":\"text-sm font-mono text-foreground\",\"children\":\"Jan 30, 2026\"}]]}],[\"$\",\"div\",null,{\"className\":\"bg-background py-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-sm font-mono uppercase text-white mb-3\",\"children\":\"Security Audits\"}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-border\",\"children\":[[\"$\",\"$L4\",\"agent-trust-hub\",{\"href\":\"/wshobson/agents/python-type-safety/security/agent-trust-hub\",\"className\":\"block py-2 hover:bg-muted/40 -mx-3 px-3 rounded transition-colors border-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between mb-1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-sm font-medium text-foreground truncate\",\"children\":\"Gen Agent Trust Hub\"}],[\"$\",\"span\",null,{\"className\":\"text-xs font-mono uppercase px-2 py-1 rounded bg-green-500/10 text-green-500\",\"children\":\"Pass\"}]]}]}],[\"$\",\"$L4\",\"socket\",{\"href\":\"/wshobson/agents/python-type-safety/security/socket\",\"className\":\"block py-2 hover:bg-muted/40 -mx-3 px-3 rounded transition-colors border-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between mb-1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-sm font-medium text-foreground truncate\",\"children\":\"Socket\"}],[\"$\",\"span\",null,{\"className\":\"text-xs font-mono uppercase px-2 py-1 rounded bg-green-500/10 text-green-500\",\"children\":\"Pass\"}]]}]}],\"$L1c\"]}]]}],\"$L1d\"]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"1c:[\"$\",\"$L4\",\"snyk\",{\"href\":\"/wshobson/agents/python-type-safety/security/snyk\",\"className\":\"block py-2 hover:bg-muted/40 -mx-3 px-3 rounded transition-colors border-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between mb-1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-sm font-medium text-foreground truncate\",\"children\":\"Snyk\"}],[\"$\",\"span\",null,{\"className\":\"text-xs font-mono uppercase px-2 py-1 rounded bg-green-500/10 text-green-500\",\"children\":\"Pass\"}]]}]}]\n"])</script><script>self.__next_f.push([1,"1d:[\"$\",\"div\",null,{\"className\":\"bg-background py-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-sm font-mono uppercase text-white mb-1\",\"children\":\"Installed on\"}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-border\",\"children\":[[\"$\",\"div\",\"claude-code\",{\"className\":\"flex items-center justify-between text-sm py-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-foreground\",\"children\":\"claude-code\"}],[\"$\",\"span\",null,{\"className\":\"text-muted-foreground font-mono\",\"children\":\"868\"}]]}],[\"$\",\"div\",\"opencode\",{\"className\":\"flex items-center justify-between text-sm py-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-foreground\",\"children\":\"opencode\"}],[\"$\",\"span\",null,{\"className\":\"text-muted-foreground font-mono\",\"children\":\"803\"}]]}],[\"$\",\"div\",\"gemini-cli\",{\"className\":\"flex items-center justify-between text-sm py-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-foreground\",\"children\":\"gemini-cli\"}],[\"$\",\"span\",null,{\"className\":\"text-muted-foreground font-mono\",\"children\":\"765\"}]]}],[\"$\",\"div\",\"codex\",{\"className\":\"flex items-center justify-between text-sm py-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-foreground\",\"children\":\"codex\"}],[\"$\",\"span\",null,{\"className\":\"text-muted-foreground font-mono\",\"children\":\"724\"}]]}],[\"$\",\"div\",\"cursor\",{\"className\":\"flex items-center justify-between text-sm py-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-foreground\",\"children\":\"cursor\"}],[\"$\",\"span\",null,{\"className\":\"text-muted-foreground font-mono\",\"children\":\"585\"}]]}],[\"$\",\"div\",\"github-copilot\",{\"className\":\"flex items-center justify-between text-sm py-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"text-foreground\",\"children\":\"github-copilot\"}],[\"$\",\"span\",null,{\"className\":\"text-muted-foreground font-mono\",\"children\":\"575\"}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"1e:Tf071,"])</script><script>self.__next_f.push([1,"\u003ch1\u003ePython Type Safety\u003c/h1\u003e\n\u003cp\u003eLeverage Python's type system to catch errors at static analysis time. Type annotations serve as enforced documentation that tooling validates automatically.\u003c/p\u003e\n\u003ch2\u003eWhen to Use This Skill\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eAdding type hints to existing code\u003c/li\u003e\n\u003cli\u003eCreating generic, reusable classes\u003c/li\u003e\n\u003cli\u003eDefining structural interfaces with protocols\u003c/li\u003e\n\u003cli\u003eConfiguring mypy or pyright for strict checking\u003c/li\u003e\n\u003cli\u003eUnderstanding type narrowing and guards\u003c/li\u003e\n\u003cli\u003eBuilding type-safe APIs and libraries\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eCore Concepts\u003c/h2\u003e\n\u003ch3\u003e1. Type Annotations\u003c/h3\u003e\n\u003cp\u003eDeclare expected types for function parameters, return values, and variables.\u003c/p\u003e\n\u003ch3\u003e2. Generics\u003c/h3\u003e\n\u003cp\u003eWrite reusable code that preserves type information across different types.\u003c/p\u003e\n\u003ch3\u003e3. Protocols\u003c/h3\u003e\n\u003cp\u003eDefine structural interfaces without inheritance (duck typing with type safety).\u003c/p\u003e\n\u003ch3\u003e4. Type Narrowing\u003c/h3\u003e\n\u003cp\u003eUse guards and conditionals to narrow types within code blocks.\u003c/p\u003e\n\u003ch2\u003eQuick Start\u003c/h2\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget_user\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euser_id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Return type makes 'might not exist' explicit.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Type checker enforces handling None case\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003euser \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e get_user\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"123\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e user \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eraise\u003c/span\u003e UserNotFoundError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"123\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euser\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# Type checker knows user is User here\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eFundamental Patterns\u003c/h2\u003e\n\u003ch3\u003ePattern 1: Annotate All Public Signatures\u003c/h3\u003e\n\u003cp\u003eEvery public function, method, and class should have type annotations.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget_user\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euser_id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Retrieve user by ID.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eprocess_batch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    items\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eItem\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    max_workers\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e BatchResult\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eProcessedItem\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Process items concurrently.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUserRepository\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e db\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Database\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_db \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e db\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003efind_by_id\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e user_id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Return User if found, None otherwise.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003efind_by_email\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e email\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esave\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e user\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e User\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Save and return user with generated ID.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUse \u003ccode\u003emypy --strict\u003c/code\u003e or \u003ccode\u003epyright\u003c/code\u003e in CI to catch type errors early. For existing projects, enable strict mode incrementally using per-module overrides.\u003c/p\u003e\n\u003ch3\u003ePattern 2: Use Modern Union Syntax\u003c/h3\u003e\n\u003cp\u003ePython 3.10+ provides cleaner union syntax.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Preferred (3.10+)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003efind_user\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euser_id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eparse_value\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token builtin\"\u003efloat\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Older style (still valid, needed for 3.9)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Optional\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Union\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003efind_user\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euser_id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Optional\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eUser\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePattern 3: Type Narrowing with Guards\u003c/h3\u003e\n\u003cp\u003eUse conditionals to narrow types for the type checker.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eprocess_user\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euser_id\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e UserData\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    user \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e find_user\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euser_id\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e user \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eraise\u003c/span\u003e UserNotFoundError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"User \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003euser_id\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e not found\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e# Type checker knows user is User here, not User | None\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e UserData\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        name\u003cspan class=\"token operator\"\u003e=\u003c/span\u003euser\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        email\u003cspan class=\"token operator\"\u003e=\u003c/span\u003euser\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eemail\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eprocess_items\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eitems\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eItem \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eProcessedItem\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e# Filter and narrow types\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    valid_items \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eitem \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e item \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e items \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e item \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e# valid_items is now list[Item]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eprocess\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eitem\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e item \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e valid_items\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePattern 4: Generic Classes\u003c/h3\u003e\n\u003cp\u003eCreate type-safe reusable containers.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e TypeVar\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Generic\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eT \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e TypeVar\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"T\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eE \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e TypeVar\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"E\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e bound\u003cspan class=\"token operator\"\u003e=\u003c/span\u003eException\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eGeneric\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e E\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Represents either a success value or an error.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        self\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        value\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e T \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        error\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e E \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003eraise\u003c/span\u003e ValueError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Exactly one of value or error must be set\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_value \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_error \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e error\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@property\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eis_success\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_error \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@property\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eis_failure\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_error \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eunwrap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e T\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Get value or raise the error.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_error \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003eraise\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_error\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_value  \u003cspan class=\"token comment\"\u003e# type: ignore[return-value]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eunwrap_or\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e default\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e T\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e T\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Get value or return default.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_error \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e default\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_value  \u003cspan class=\"token comment\"\u003e# type: ignore[return-value]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Usage preserves types\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eparse_config\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epath\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Result\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eConfig\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ConfigError\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003etry\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Result\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token operator\"\u003e=\u003c/span\u003eConfig\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efrom_file\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epath\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eexcept\u003c/span\u003e ConfigError \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Result\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token operator\"\u003e=\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eresult \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e parse_config\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"config.yaml\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e result\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eis_success\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    config \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e result\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eunwrap\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# Type: Config\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eAdvanced Patterns\u003c/h2\u003e\n\u003ch3\u003ePattern 5: Generic Repository\u003c/h3\u003e\n\u003cp\u003eCreate type-safe data access patterns.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e TypeVar\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Generic\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e abc \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e ABC\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e abstractmethod\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eT \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e TypeVar\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"T\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eID \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e TypeVar\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"ID\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRepository\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eABC\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Generic\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ID\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Generic repository interface.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@abstractmethod\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e ID\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e T \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Get entity by ID.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@abstractmethod\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esave\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e entity\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e T\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e T\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Save and return entity.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@abstractmethod\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003edelete\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e ID\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Delete entity, return True if existed.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUserRepository\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eRepository\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eUser\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Concrete repository for Users with string IDs.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        row \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_db\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efetchrow\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token string\"\u003e\"SELECT * FROM users WHERE id = $1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e User\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e**\u003c/span\u003erow\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e row \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esave\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e entity\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e User\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e User\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003edelete\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePattern 6: TypeVar with Bounds\u003c/h3\u003e\n\u003cp\u003eRestrict generic parameters to specific types.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e TypeVar\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e pydantic \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e BaseModel\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eModelT \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e TypeVar\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"ModelT\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e bound\u003cspan class=\"token operator\"\u003e=\u003c/span\u003eBaseModel\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003evalidate_and_create\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emodel_cls\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eModelT\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003edict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e ModelT\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Create a validated Pydantic model from dict.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e model_cls\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emodel_validate\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edata\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Works with any BaseModel subclass\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUser\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eBaseModel\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    name\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    email\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003euser \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e validate_and_create\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUser\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Alice\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"email\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"a@b.com\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# user is typed as User\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Type error: str is not a BaseModel subclass\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eresult \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e validate_and_create\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Alice\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# Error!\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePattern 7: Protocols for Structural Typing\u003c/h3\u003e\n\u003cp\u003eDefine interfaces without requiring inheritance.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Protocol\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e runtime_checkable\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token decorator annotation punctuation\"\u003e@runtime_checkable\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eProtocol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Any class that can be serialized to/from dict.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eto_dict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003edict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@classmethod\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003efrom_dict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecls\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003edict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Serializable\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# User satisfies Serializable without inheriting from it\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUser\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eto_dict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003edict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"id\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@classmethod\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003efrom_dict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecls\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e data\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003edict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"User\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e cls\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003edata\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"id\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e=\u003c/span\u003edata\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eserialize\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Serializable\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Works with any Serializable object.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e json\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edumps\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eto_dict\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Works - User matches the protocol\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eserialize\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUser\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Alice\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Runtime checking with @runtime_checkable\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUser\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Alice\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Serializable\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# True\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePattern 8: Common Protocol Patterns\u003c/h3\u003e\n\u003cp\u003eDefine reusable structural interfaces.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Protocol\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eCloseable\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eProtocol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Resource that can be closed.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eclose\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAsyncCloseable\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eProtocol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Async resource that can be closed.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eclose\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReadable\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eProtocol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Object that can be read from.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eread\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e n\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ebytes\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHasId\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eProtocol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Object with an ID property.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token decorator annotation punctuation\"\u003e@property\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eComparable\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eProtocol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"Object that supports comparison.\"\"\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__lt__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Comparable\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__le__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Comparable\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003ebool\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePattern 9: Type Aliases\u003c/h3\u003e\n\u003cp\u003eCreate meaningful type names.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eNote:\u003c/strong\u003e The \u003ccode\u003etype\u003c/code\u003e statement was introduced in Python 3.10 for simple aliases. Generic type statements require Python 3.12+.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Python 3.10+ type statement for simple aliases\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e UserId \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e UserDict \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003edict\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Any\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Python 3.12+ type statement with generics\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e Handler\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Callable\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e T\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e AsyncHandler\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Callable\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Awaitable\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Python 3.9-3.11 style (needed for broader compatibility)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e TypeAlias\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e collections\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eabc \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Callable\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Awaitable\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eUserId\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e TypeAlias \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eHandler\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e TypeAlias \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Callable\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Response\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Usage\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eregister_handler\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epath\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e handler\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Handler\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003ePattern 10: Callable Types\u003c/h3\u003e\n\u003cp\u003eType function parameters and callbacks.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e collections\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eabc \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Callable\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Awaitable\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Sync callback\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eProgressCallback \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Callable\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (current, total)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# Async callback\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003eAsyncHandler \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Callable\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eRequest\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Awaitable\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eResponse\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# With named parameters (using Protocol)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eOnProgress\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eProtocol\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__call__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        self\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        current\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        total\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        message\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eprocess_items\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    items\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eItem\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    on_progress\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e ProgressCallback \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token builtin\"\u003elist\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eResult\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e item \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eitems\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e on_progress\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            on_progress\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003elen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eitems\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eConfiguration\u003c/h2\u003e\n\u003ch3\u003eStrict Mode Checklist\u003c/h3\u003e\n\u003cp\u003eFor \u003ccode\u003emypy --strict\u003c/code\u003e compliance:\u003c/p\u003e\n\u003cpre class=\"language-toml\"\u003e\u003ccode class=\"language-toml code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e# pyproject.toml\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token table class-name\"\u003etool.mypy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token key property\"\u003epython_version\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"3.12\"\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token key property\"\u003estrict\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token key property\"\u003ewarn_return_any\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token key property\"\u003ewarn_unused_ignores\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token key property\"\u003edisallow_untyped_defs\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token key property\"\u003edisallow_incomplete_defs\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token key property\"\u003eno_implicit_optional\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIncremental adoption goals:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAll function parameters annotated\u003c/li\u003e\n\u003cli\u003eAll return types annotated\u003c/li\u003e\n\u003cli\u003eClass attributes annotated\u003c/li\u003e\n\u003cli\u003eMinimize \u003ccode\u003eAny\u003c/code\u003e usage (acceptable for truly dynamic data)\u003c/li\u003e\n\u003cli\u003eGeneric collections use type parameters (\u003ccode\u003elist[str]\u003c/code\u003e not \u003ccode\u003elist\u003c/code\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor existing codebases, enable strict mode per-module using \u003ccode\u003e# mypy: strict\u003c/code\u003e or configure per-module overrides in \u003ccode\u003epyproject.toml\u003c/code\u003e.\u003c/p\u003e\n\u003ch2\u003eBest Practices Summary\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eAnnotate all public APIs\u003c/strong\u003e - Functions, methods, class attributes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUse \u003ccode\u003eT | None\u003c/code\u003e\u003c/strong\u003e - Modern union syntax over \u003ccode\u003eOptional[T]\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRun strict type checking\u003c/strong\u003e - \u003ccode\u003emypy --strict\u003c/code\u003e in CI\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUse generics\u003c/strong\u003e - Preserve type info in reusable code\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDefine protocols\u003c/strong\u003e - Structural typing for interfaces\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNarrow types\u003c/strong\u003e - Use guards to help the type checker\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBound type vars\u003c/strong\u003e - Restrict generics to meaningful types\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCreate type aliases\u003c/strong\u003e - Meaningful names for complex types\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMinimize \u003ccode\u003eAny\u003c/code\u003e\u003c/strong\u003e - Use specific types or generics. \u003ccode\u003eAny\u003c/code\u003e is acceptable for truly dynamic data or when interfacing with untyped third-party code\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDocument with types\u003c/strong\u003e - Types are enforceable documentation\u003c/li\u003e\n\u003c/ol\u003e"])</script><script>self.__next_f.push([1,"1b:[\"$\",\"div\",null,{\"className\":\"prose prose-invert max-w-none prose-headings:font-semibold prose-headings:tracking-tight prose-h1:text-4xl prose-h1:mb-2 prose-h2:text-2xl prose-h2:mb-2 prose-h3:text-lg prose-h3:mb-2 prose-p:text-muted-foreground prose-li:text-muted-foreground prose-code:bg-muted prose-code:text-foreground prose-code:px-1 prose-code:py-0.5 prose-code:rounded-sm prose-code:text-sm prose-code:before:content-none prose-code:after:content-none prose-pre:bg-muted prose-pre:text-foreground prose-pre:border prose-pre:border-border prose-pre:rounded-md [\u0026_table]:!border-[color:var(--border)] [\u0026_th]:!border-[color:var(--border)] [\u0026_td]:!border-[color:var(--border)]\",\"dangerouslySetInnerHTML\":{\"__html\":\"$1e\"}}]\n17:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n15:null\n"])</script><script>self.__next_f.push([1,"19:[[\"$\",\"title\",\"0\",{\"children\":\"python-type-safety by wshobson/agents\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Discover and install skills for AI agents.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"canonical\",\"href\":\"https://skills.sh/wshobson/agents/python-type-safety\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:title\",\"content\":\"python-type-safety by wshobson/agents\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:description\",\"content\":\"Discover and install skills for AI agents.\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:url\",\"content\":\"https://skills.sh/wshobson/agents/python-type-safety\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:image:alt\",\"content\":\"Skill\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image:type\",\"content\":\"image/png\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image\",\"content\":\"https://skills.sh/wshobson/agents/python-type-safety/opengraph-image?af71664f4dc3e62d\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:title\",\"content\":\"python-type-safety by wshobson/agents\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:description\",\"content\":\"Install the python-type-safety skill for wshobson/agents\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:image:alt\",\"content\":\"Skill\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image:type\",\"content\":\"image/png\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:image\",\"content\":\"https://skills.sh/wshobson/agents/python-type-safety/opengraph-image?af71664f4dc3e62d\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:image:height\",\"content\":\"630\"}],[\"$\",\"link\",\"19\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.0b3bf435.ico?dpl=dpl_7rMZ7gEvzzDw9nK48AiXmGZHLBzJ\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"}],[\"$\",\"$L1f\",\"20\",{}]]\n"])</script></body></html>